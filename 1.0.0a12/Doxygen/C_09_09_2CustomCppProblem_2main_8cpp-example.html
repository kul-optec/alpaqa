<!-- HTML header for doxygen 1.9.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>alpaqa: C++/CustomCppProblem/main.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type="text/javascript">
window.MathJax = {
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  },
  loader: {
    load: ['[tex]/ams']
  },
  tex: {
    macros: {    Reals: "{\\mathrm{I\\!R}}",
    Nats: "{\\mathrm{I\\!N}}",
    Cplx: "{\\mathbb{C}}",
    R: "{\\Reals}",
    N: "{\\Nats}",
    C: "{\\Cplx}",
    Rn: "{\\Reals^n}",
    Rm: "{\\Reals^m}",
    gph: "{\\operatorname{\\mathbf{gph}}}",
    zer: "{\\operatorname{\\mathbf{zer}}}",
    fix: "{\\operatorname{\\mathbf{fix}}}",
    minimize: "{\\operatorname*{\\mathbf{minimize}}}",
    st: "{\\operatorname*{\\mathbf{s.\\!t.}}}",
    argmin: "{\\operatorname*{\\mathbf{arg\\,min}}}",
    argmax: "{\\operatorname*{\\mathbf{arg\\,max}}}",
    subjto: "{\\operatorname*{\\mathbf{subject\\;to}}}",
    prox: "{\\operatorname{\\mathbf{prox}}}",
    Hilb: "{\\mathcal{H}}",
    proj: ["{\\operatorname{\\mathbf{\\Pi}_\\mathnormal{#1}}}",1],
    dist: "{\\operatorname{\\mathbf{dist}}}",
    Id: "{\\mathrm{Id}}",
    I: "{\\mathrm{I}}",
    one: "{\\mathbf{1}}",
    defeq: "{\\triangleq}",
    inprod: ["{\\left\\langle {#1} \\,\\middle|\\, {#2} \\right\\rangle}",2],
    norm: ["{\\left\\| {#1} \\vphantom{X} \\right\\|}",1],
    normsq: ["{\\norm{#1}^2}",1],
    defset: ["{\\left\\{ {#1} \\;\\middle|\\; {#2} \\right\\}}",2],
    tp: ["{#1^\\top}",1],
    ttp: ["{#1^{\\!\\top\\!}}",1],
    herm: ["{#1^\\mathrm{H}}",1],
    invherm: ["{#1^{-\\mathrm{H}}}",1],
    inv: ["{#1^{-1}}",1],
    pinv: ["{#1^\\dagger}",1],
    lconj: "{\\overline}",
    sconj: ["{#1^*}",1],
    iddots: "{\\mathinner{\\kern1mu\\raise1pt{.}\\kern2mu\\raise4pt{.}\\kern2mu\\raise7pt{\\Rule{0pt}{7pt}{0pt}.}\\kern1mu}}",
    imagfun: ["{\\left(#1\\right)\\left(#2\\right)}",2],
    Lagr: "{\\mathcal{L}}",
    jac: "{\\mathrm{J}}",
    dft: "{\\operatorname{\\mathbf{dft}}}",
    cbrt: ["{\\sqrt[3]{#1}}",1],
    sgn: "{\\operatorname{\\mathbf{sgn}}}",
    setmap: "{\\rightrightarrows}",
    lammin: "{\\lambda_\\text{min}}",
    lammax: "{\\lambda_\\text{max}}",
    Sc: "{\\mathcal{S}}",
    Scstar: "{\\mathcal{S}^*}",
    diag: "{\\operatorname{\\mathbf{diag}}}",
    blkdiag: "{\\operatorname{\\mathbf{blkdiag}}}",
    posdef: "{\\succ}",
    possdef: "{\\succeq}",
    half: "{\\tfrac{1}{2}}",
    hhbar: "{\\hbar}",
    barxuk: "{\\bar x^k\\!, \\bar u^k}",
    },
    packages: ['base','configmacros','newcommand','ams']
  }
};
window.MathJax.tex.tags = 'ams';
</script>
<script type="text/javascript" id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&family=Roboto:wght@400&family=Roboto:wght@500&display=swap" rel="stylesheet">
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">alpaqa<span id="projectnumber">&#160;<code><a href="/alpaqa/index.html">1.0.0a12</a></code></span>
   </div>
   <div id="projectbrief">Nonconvex constrained optimization</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">C++/CustomCppProblem/main.cpp</div></div>
</div><!--header-->
<div class="contents">
<p>This example shows how to define optimization problems using ordinary C++ functions.</p>
<p>This example shows how to define optimization problems using ordinary C++ functions. <br  />
</p>
<p>It solves a simple quadratic program of the form:  </p><p class="formulaDsp">
\[ \begin{aligned}
&amp; \underset{x}{\text{minimize}} &amp;&amp; \tfrac12 \tp x Q x \\ 
&amp; \text{subject to} &amp;&amp; Ax \le b \\ 
\end{aligned} \]
</p>
<h2><a class="anchor" id="problem-specification"></a>
Problem specification</h2>
<p>The problem is specified by creating a class (<code>Problem</code>) that inherits from alpaqa's <a class="el" href="classalpaqa_1_1BoxConstrProblem.html">alpaqa::BoxConstrProblem</a> class. It defines the problem-specific functions for the evaluation of the cost function \( f(x) = \tfrac12 \tp xQx \) (<a class="el" href="classalpaqa_1_1TypeErasedProblem.html#ac9fcb632c5d0395e2c36e39277efd1b0">eval_f</a>) and its gradient \( \nabla f(x) = Qx \) (<a class="el" href="classalpaqa_1_1TypeErasedProblem.html#aba98edc04bad2e0a3ad6645991cd7535">eval_grad_f</a>), as well as the constraint function \( g(x) = Ax \) (<a class="el" href="classalpaqa_1_1TypeErasedProblem.html#acdf5c7c7f249c05d53643e1715070f45">eval_g</a>) and the function that evaluates the product of the gradient of the constraints and a given vector \( y \), \( \nabla g(x)\,y = \tp A y \) (<a class="el" href="classalpaqa_1_1TypeErasedProblem.html#ab3ddf22ddba40c16ab196c1371405ea0">eval_grad_g_prod</a>).</p>
<p>If you have more efficient ways to combine evaluations of these functions and gradients, you can specify them as well, see <a class="el" href="classalpaqa_1_1TypeErasedProblem.html">alpaqa::TypeErasedProblem</a> for the full list of supported functions.</p>
<p>The <a class="el" href="classalpaqa_1_1BoxConstrProblem.html">alpaqa::BoxConstrProblem</a> class exposes the two constraint sets, \( x \in C \) and \( g(x) \in D \), and provides the projection functions (<a class="el" href="classalpaqa_1_1TypeErasedProblem.html#a02bf998629ca590cf5a2e183cbf43444">eval_prox_grad_step</a>, <a class="el" href="classalpaqa_1_1TypeErasedProblem.html#ae9f75b521c8932199f92bfdfc8f91879">eval_proj_diff_g</a> and <a class="el" href="classalpaqa_1_1TypeErasedProblem.html#ab84164ea48e4cdae5396285423fed829">eval_proj_multipliers</a>) for you. The <a class="el" href="classalpaqa_1_1BoxConstrProblem.html">alpaqa::BoxConstrProblem</a> constructor accepts the number of variables \( n = 2 \) and the number of constraints \( m = 1 \) as arguments.</p>
<dl class="section note"><dt>Note</dt><dd>Alpaqa uses <a href="https://en.wikipedia.org/wiki/Structural_type_system">structural typing</a> for problem definitions. This means that you just have to provide the supported functions with the correct names and arguments, and the library will pick them up automatically, you don't have to inherit from any abstract interfaces or override any virtual functions. See <a class="el" href="page-problem-formulations.html">Problem formulations</a> for more information.</dd></dl>
<dl class="section see"><dt>See also</dt><dd>If you haven't already, be sure to go through the <a class="el" href="page-problem-formulations.html">Problem formulations</a> page.</dd></dl>
<h2><a class="anchor" id="solver-selection"></a>
Solver selection</h2>
<p>The solver consists of three layers:</p>
<ol type="1">
<li>The outer augmented Lagrangian solver (<a class="el" href="classalpaqa_1_1ALMSolver.html">alpaqa::ALMSolver</a>) that handles the general constraints \( g(x) \in D \);</li>
<li>The inner PANOC solver (<a class="el" href="classalpaqa_1_1PANOCSolver.html">alpaqa::PANOCSolver</a>) that is used to solve the ALM subproblems;</li>
<li>The L-BFGS direction (<a class="el" href="structalpaqa_1_1LBFGSDirection.html">alpaqa::LBFGSDirection</a>) that provides fast Newton-type directions to speed up PANOC.</li>
</ol>
<p>You can try out different inner solvers (<a class="el" href="group__grp__InnerSolvers.html">Inner solvers</a>) and direction providers (<a class="el" href="group__grp__DirectionProviders.html">Direction providers</a>), you can even write your own.</p>
<h2><a class="anchor" id="solver-configuration"></a>
Solver configuration</h2>
<p>Each solver and direction class has a set of parameters, which are collected in a struct. Tuning these parameters can often significantly improve solver performance. You can also use them to limit the run time or the number of iterations, and to enable verbose output from the solvers.</p>
<h2><a class="anchor" id="solver-invocation"></a>
Solver invocation</h2>
<p>The solver is invoked by calling the solver object with an instance of the problem and an initial guess for the Lagrange multipliers and the decision variables. The solver will overwrite these guesses with the (approximate) solution, and returns a struct containing solver statistics, the most important of which is the <a class="el" href="classalpaqa_1_1ALMSolver.html#aee2c4f98f302657ab605683cf4076cf8">status</a>, which reports whether convergence to the desired tolerance was achieved.</p>
<div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="preprocessor">#include &lt;<a class="code" href="panoc-alm_8hpp.html">alpaqa/panoc-alm.hpp</a>&gt;</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="preprocessor">#include &lt;<a class="code" href="box-constr-problem_8hpp.html">alpaqa/problem/box-constr-problem.hpp</a>&gt;</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="preprocessor">#include &lt;<a class="code" href="problem-with-counters_8hpp.html">alpaqa/problem/problem-with-counters.hpp</a>&gt;</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span> </div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span> </div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="keywordtype">int</span> <a id="a0" name="a0"></a><a class="code hl_function" href="alpaqa-driver_8cpp.html#ac0f2228420376f4db7e1274f2b41667c">main</a>() {</div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span>    <a id="a1" name="a1"></a><a class="code hl_define" href="config_8hpp.html#a3c06cc0dbec2055c76ab3d5fcc91736c">USING_ALPAQA_CONFIG</a>(<a id="_a2" name="_a2"></a><a class="code hl_struct" href="structalpaqa_1_1EigenConfigd.html">alpaqa::DefaultConfig</a>);</div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span> </div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span>    <span class="comment">// Problem specification</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span>    <span class="comment">// minimize  ½ xᵀQx</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span>    <span class="comment">//  s.t.     Ax ≤ b</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span>    <span class="keyword">struct </span>Problem : <a id="_a3" name="_a3"></a><a class="code hl_class" href="classalpaqa_1_1BoxConstrProblem.html">alpaqa::BoxConstrProblem</a>&lt;config_t&gt; {</div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span>        mat Q{<a id="a4" name="a4"></a><a class="code hl_variable" href="classalpaqa_1_1BoxConstrProblem.html#aabc18ecd72b605ecfcdcf49e2915a770">n</a>, n};</div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span>        mat A{<a id="a5" name="a5"></a><a class="code hl_variable" href="classalpaqa_1_1BoxConstrProblem.html#a2d19f2e101f434a89a17adecbf2f9952">m</a>, n};</div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span>        vec b{m};</div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span>        <span class="keyword">mutable</span> vec Qx{n};</div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span> </div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span>        Problem() : <a class="code hl_class" href="classalpaqa_1_1BoxConstrProblem.html">alpaqa::BoxConstrProblem&lt;config_t&gt;</a>{2, 1} {</div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span>            <span class="comment">// Initialize problem matrices</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span>            Q &lt;&lt; 3, -1, -1, 3;</div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span>            A &lt;&lt; 2, 1;</div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span>            b &lt;&lt; -1;</div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span> </div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span>            <span class="comment">// Specify the bounds</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span>            C.lowerbound = vec::Constant(n, -<a id="a6" name="a6"></a><a class="code hl_variable" href="namespacealpaqa.html#aaf33d0d11e4ffd7c822e41589b19b42b">alpaqa::inf&lt;config_t&gt;</a>);</div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span>            C.upperbound = vec::Constant(n, +<a class="code hl_variable" href="namespacealpaqa.html#aaf33d0d11e4ffd7c822e41589b19b42b">alpaqa::inf&lt;config_t&gt;</a>);</div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span>            D.lowerbound = vec::Constant(m, -<a class="code hl_variable" href="namespacealpaqa.html#aaf33d0d11e4ffd7c822e41589b19b42b">alpaqa::inf&lt;config_t&gt;</a>);</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span>            D.upperbound = b;</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span>        }</div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span> </div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span>        <span class="comment">// Evaluate the cost</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span>        real_t eval_f(crvec x)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span>            Qx.noalias() = Q * x;</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span>            <span class="keywordflow">return</span> 0.5 * x.dot(Qx);</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>        }</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>        <span class="comment">// Evaluat the gradient of the cost</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>        <span class="keywordtype">void</span> eval_grad_f(crvec x, rvec gr)<span class="keyword"> const </span>{ gr.noalias() = Q * x; }</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>        <span class="comment">// Evaluate the constraints</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>        <span class="keywordtype">void</span> eval_g(crvec x, rvec g)<span class="keyword"> const </span>{ g.noalias() = A * x; }</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>        <span class="comment">// Evaluate a matrix-vector product with the gradient of the constraints</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>        <span class="keywordtype">void</span> eval_grad_g_prod(crvec x, crvec y, rvec gr)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>            (<a class="code hl_variable" href="namespacealpaqa.html#aaf33d0d11e4ffd7c822e41589b19b42b">void</a>)x;</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>            gr.noalias() = A.transpose() * y;</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>        }</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>    };</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span> </div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>    Problem problem;</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span> </div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>    <span class="comment">// Wrap the problem to count the function evaluations</span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>    <span class="keyword">auto</span> counted_problem = <a id="a7" name="a7"></a><a class="code hl_function" href="group__grp__Problems.html#ga9bee36117cb1df63e6f584b3418b9b7a">alpaqa::problem_with_counters_ref</a>(problem);</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span> </div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>    <span class="comment">// Define the solvers to use</span></div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>    <span class="keyword">using </span>Direction   = <a id="_a8" name="_a8"></a><a class="code hl_struct" href="structalpaqa_1_1LBFGSDirection.html">alpaqa::LBFGSDirection&lt;config_t&gt;</a>;</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>    <span class="keyword">using </span>InnerSolver = <a id="_a9" name="_a9"></a><a class="code hl_class" href="classalpaqa_1_1PANOCSolver.html">alpaqa::PANOCSolver&lt;Direction&gt;</a>;</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>    <span class="keyword">using </span>OuterSolver = <a id="_a10" name="_a10"></a><a class="code hl_class" href="classalpaqa_1_1ALMSolver.html">alpaqa::ALMSolver&lt;InnerSolver&gt;</a>;</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span> </div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>    <span class="comment">// Settings for the outer augmented Lagrangian method</span></div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>    OuterSolver::Params almparam;</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>    almparam.tolerance             = 1e-8; <span class="comment">// tolerance</span></div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>    almparam.dual_tolerance        = 1e-8;</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>    almparam.penalty_update_factor = 10; <span class="comment">// penalty update factor</span></div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>    almparam.max_iter              = 20;</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>    almparam.print_interval        = 1;</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span> </div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>    <span class="comment">// Settings for the inner PANOC solver</span></div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>    InnerSolver::Params panocparam;</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>    panocparam.max_iter       = 500;</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>    panocparam.print_interval = 1;</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>    <span class="comment">// Settings for the L-BFGS algorithm used by PANOC</span></div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>    Direction::AcceleratorParams lbfgsparam;</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>    lbfgsparam.memory = 2;</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span> </div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>    <span class="comment">// Create an ALM solver using PANOC as inner solver</span></div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>    OuterSolver solver{</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>        almparam,                 <span class="comment">// params for outer solver</span></div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>        {panocparam, lbfgsparam}, <span class="comment">// inner solver</span></div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>    };</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span> </div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>    <span class="comment">// Initial guess</span></div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>    vec x(2);</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>    x &lt;&lt; 2, 2; <span class="comment">// decision variables</span></div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>    vec y(1);</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>    y &lt;&lt; 1; <span class="comment">// Lagrange multipliers</span></div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span> </div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>    <span class="comment">// Solve the problem</span></div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>    <span class="keyword">auto</span> stats = solver(counted_problem, x, y);</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>    <span class="comment">// y and x have been overwritten by the solution</span></div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span> </div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>    <span class="comment">// Print the results</span></div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>    std::cout &lt;&lt; <span class="charliteral">&#39;\n&#39;</span> &lt;&lt; *counted_problem.evaluations &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;status: &quot;</span> &lt;&lt; stats.status &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>              &lt;&lt; <span class="stringliteral">&quot;f = &quot;</span> &lt;&lt; problem.eval_f(x) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>              &lt;&lt; <span class="stringliteral">&quot;inner iterations: &quot;</span> &lt;&lt; stats.inner.iterations &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>              &lt;&lt; <span class="stringliteral">&quot;outer iterations: &quot;</span> &lt;&lt; stats.outer_iterations &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>              &lt;&lt; <span class="stringliteral">&quot;ε = &quot;</span> &lt;&lt; stats.ε &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>              &lt;&lt; <span class="stringliteral">&quot;δ = &quot;</span> &lt;&lt; stats.δ &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>              &lt;&lt; <span class="stringliteral">&quot;elapsed time:     &quot;</span></div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>              &lt;&lt; std::chrono::duration&lt;double&gt;{stats.elapsed_time}.count()</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>              &lt;&lt; <span class="stringliteral">&quot; s&quot;</span> &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>              &lt;&lt; <span class="stringliteral">&quot;x = &quot;</span> &lt;&lt; x.transpose() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>              &lt;&lt; <span class="stringliteral">&quot;y = &quot;</span> &lt;&lt; y.transpose() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>              &lt;&lt; <span class="stringliteral">&quot;avg τ = &quot;</span> &lt;&lt; (stats.inner.sum_τ / stats.inner.count_τ) &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>              &lt;&lt; <span class="stringliteral">&quot;L-BFGS rejected = &quot;</span> &lt;&lt; stats.inner.lbfgs_rejected &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>              &lt;&lt; <span class="stringliteral">&quot;L-BFGS failures = &quot;</span> &lt;&lt; stats.inner.lbfgs_failures &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>              &lt;&lt; <span class="stringliteral">&quot;Line search failures = &quot;</span> &lt;&lt; stats.inner.linesearch_failures</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>              &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>              &lt;&lt; std::endl;</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>}</div>
<div class="ttc" id="aalpaqa-driver_8cpp_html_ac0f2228420376f4db7e1274f2b41667c"><div class="ttname"><a href="alpaqa-driver_8cpp.html#ac0f2228420376f4db7e1274f2b41667c">main</a></div><div class="ttdeci">int main(int argc, const char *argv[])</div><div class="ttdef"><b>Definition</b> <a href="alpaqa-driver_8cpp_source.html#l00237">alpaqa-driver.cpp:237</a></div></div>
<div class="ttc" id="abox-constr-problem_8hpp_html"><div class="ttname"><a href="box-constr-problem_8hpp.html">box-constr-problem.hpp</a></div></div>
<div class="ttc" id="aclassalpaqa_1_1ALMSolver_html"><div class="ttname"><a href="classalpaqa_1_1ALMSolver.html">alpaqa::ALMSolver</a></div><div class="ttdoc">Augmented Lagrangian Method solver.</div><div class="ttdef"><b>Definition</b> <a href="alm_8hpp_source.html#l00096">alm.hpp:96</a></div></div>
<div class="ttc" id="aclassalpaqa_1_1BoxConstrProblem_html"><div class="ttname"><a href="classalpaqa_1_1BoxConstrProblem.html">alpaqa::BoxConstrProblem</a></div><div class="ttdoc">Implements common problem functions for minimization problems with box constraints.</div><div class="ttdef"><b>Definition</b> <a href="box-constr-problem_8hpp_source.html#l00016">box-constr-problem.hpp:16</a></div></div>
<div class="ttc" id="aclassalpaqa_1_1BoxConstrProblem_html_a2d19f2e101f434a89a17adecbf2f9952"><div class="ttname"><a href="classalpaqa_1_1BoxConstrProblem.html#a2d19f2e101f434a89a17adecbf2f9952">alpaqa::BoxConstrProblem::m</a></div><div class="ttdeci">length_t m</div><div class="ttdoc">Number of constraints, dimension of g(x) and z.</div><div class="ttdef"><b>Definition</b> <a href="box-constr-problem_8hpp_source.html#l00024">box-constr-problem.hpp:24</a></div></div>
<div class="ttc" id="aclassalpaqa_1_1BoxConstrProblem_html_aabc18ecd72b605ecfcdcf49e2915a770"><div class="ttname"><a href="classalpaqa_1_1BoxConstrProblem.html#aabc18ecd72b605ecfcdcf49e2915a770">alpaqa::BoxConstrProblem::n</a></div><div class="ttdeci">length_t n</div><div class="ttdoc">Number of decision variables, dimension of x.</div><div class="ttdef"><b>Definition</b> <a href="box-constr-problem_8hpp_source.html#l00022">box-constr-problem.hpp:22</a></div></div>
<div class="ttc" id="aclassalpaqa_1_1PANOCSolver_html"><div class="ttname"><a href="classalpaqa_1_1PANOCSolver.html">alpaqa::PANOCSolver</a></div><div class="ttdoc">PANOC solver for ALM.</div><div class="ttdef"><b>Definition</b> <a href="panoc_8hpp_source.html#l00123">panoc.hpp:123</a></div></div>
<div class="ttc" id="aconfig_8hpp_html_a3c06cc0dbec2055c76ab3d5fcc91736c"><div class="ttname"><a href="config_8hpp.html#a3c06cc0dbec2055c76ab3d5fcc91736c">USING_ALPAQA_CONFIG</a></div><div class="ttdeci">#define USING_ALPAQA_CONFIG(Conf)</div><div class="ttdef"><b>Definition</b> <a href="config_8hpp_source.html#l00056">config.hpp:56</a></div></div>
<div class="ttc" id="agroup__grp__Problems_html_ga9bee36117cb1df63e6f584b3418b9b7a"><div class="ttname"><a href="group__grp__Problems.html#ga9bee36117cb1df63e6f584b3418b9b7a">alpaqa::problem_with_counters_ref</a></div><div class="ttdeci">auto problem_with_counters_ref(Problem &amp;p)</div><div class="ttdoc">Wraps the given problem into a ProblemWithCounters and keeps track of how many times each function is...</div><div class="ttdef"><b>Definition</b> <a href="problem-with-counters_8hpp_source.html#l00135">problem-with-counters.hpp:135</a></div></div>
<div class="ttc" id="anamespacealpaqa_html_aaf33d0d11e4ffd7c822e41589b19b42b"><div class="ttname"><a href="namespacealpaqa.html#aaf33d0d11e4ffd7c822e41589b19b42b">alpaqa::inf</a></div><div class="ttdeci">constexpr const auto inf</div><div class="ttdef"><b>Definition</b> <a href="config_8hpp_source.html#l00085">config.hpp:85</a></div></div>
<div class="ttc" id="apanoc-alm_8hpp_html"><div class="ttname"><a href="panoc-alm_8hpp.html">panoc-alm.hpp</a></div></div>
<div class="ttc" id="aproblem-with-counters_8hpp_html"><div class="ttname"><a href="problem-with-counters_8hpp.html">problem-with-counters.hpp</a></div></div>
<div class="ttc" id="astructalpaqa_1_1EigenConfigd_html"><div class="ttname"><a href="structalpaqa_1_1EigenConfigd.html">alpaqa::EigenConfigd</a></div><div class="ttdoc">Double-precision double configuration.</div><div class="ttdef"><b>Definition</b> <a href="config_8hpp_source.html#l00135">config.hpp:135</a></div></div>
<div class="ttc" id="astructalpaqa_1_1LBFGSDirection_html"><div class="ttname"><a href="structalpaqa_1_1LBFGSDirection.html">alpaqa::LBFGSDirection</a></div><div class="ttdef"><b>Definition</b> <a href="inner_2directions_2panoc_2lbfgs_8hpp_source.html#l00017">lbfgs.hpp:17</a></div></div>
</div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Sep 27 2023 for alpaqa by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
